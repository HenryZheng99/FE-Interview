# 浏览器

1. cookie的有效时间默认为-1，如果不进行设置的话，就会默认在浏览器会话关闭时结束。

2. 从输入URL到呈现页面过程

   DNS解析和网络传输： https://blog.csdn.net/zhenghaohan1999/article/details/104169030 

   浏览器工作原理： https://blog.csdn.net/zhenghaohan1999/article/details/94649829 

3. **强缓存、协商缓存、CDN缓存**

   ```markdown
   - 缓存对于前端性能优化来说是个很重要的点，良好的缓存策略可以降低资源的重复加载提高网页的整体加载速度
   - 浏览器第一次打开一个网页获取资源后，根据返回的header信息来告诉如何缓存资源
   - 通常浏览器缓存策略分为两种：强缓存和协商缓存
   # 强缓存（本地缓存）
   强缓存表示在缓存期间不需要请求（在过期时间之内不会再去重复请求），HTTP state code为200，实现强缓存可以通过两种响应头实现：Expires和 Cache-Control （都用于设置资源过期时间）
   # 协商缓存
   - 如果本地缓存过期了，我们就可以使用协商缓存来解决问题。
   - 协商缓存需要向服务器发送请求，浏览器会首先将**缓存标识**发送给服务器，服务器拿到标识后判断标识是否匹配，如果不匹配，表示资源有更新，服务器会将新数据和新的缓存标识一起返回到浏览器；
   - 如果缓存标识匹配，表示资源没有更新，并且返回 304 状态码，浏览器就读取本地缓存中的数据。
   ```

    博文：https://blog.csdn.net/zl399615007/article/details/84534884 

   ```
   etag是根据实体内容生成的一段hash字符串，可以标识资源的状态。 当资源发生改变时，ETag也随之发生变化。
   
   为什么使用ETag呢？ 主要是为了解决Last-Modified 无法解决的一些问题。
   
   - 某些服务器不能精确得到文件的最后修改时间，这样就无法通过最后修改时间来判断文件是否更新了。
   
   - 某些文件的修改非常频繁，在秒以下的时间内进行修改. Last-Modified只能精确到秒。
   
   - 一些文件的最后修改时间改变了，但是内容并未改变。我们不希望客户端认为这个文件修改了。
   ```

   ```
   CDN:Content Delivery Network，即内容分发网络
   
   　　各地部署多套静态存储服务，本质上是空间换时间
   
   　　自动选择最近的节点内容，不存在再请求原始服务器
   ```

4. **跨域（JSONP/CORS）**

   - **jsonp请求**：jsonp的原理是利用<script>标签的跨域特性，可以不受限制地从其他域中加载资源，类似的标签还有<img>。JSONP优点是简单兼容性好，可用于解决主流浏览器的跨域数据访问的问题。缺点是仅支持get方法具有局限性,不安全可能会遭受XSS攻击。把跨域的API数据接口地址，赋值给script的src。

   - **window.postMessage**：window.postMessages是html5中实现跨域访问的一种新方式，可以使用它来向其它的window对象发送消息，无论这个window对象是属于同源或不同源。

   - **CORS**：CORS（跨域资源共享）背后的基本思想，就是使用自定义的HTTP头部让浏览器与服务器进行沟通，从而决定请求或响应是应该成功还是应该失败。浏览器会自动进行 CORS 通信，实现 CORS 通信的关键是后端。只要后端实现了 CORS，就实现了跨域。

   - **WebSockets**：web sockets原理：在JS创建了web socket之后，会有一个HTTP请求发送到浏览器以发起连接。取得服务器响应后，建立的连接会使用HTTP升级从HTTP协议交换为web sockt协议。

5.  浏览器会将ajax请求分为两类，其处理方案略有差异：简单请求、特殊请求。简单请求有：get、post、head，特殊请求有：delete等。

   - 简单请求下，服务器端设定跨域：

     ```
     Access-Control-Allow-Origin：可接受的域，是一个具体域名或者*，代表任意
     Access-Control-Allow-Credentials：是否允许携带cookie，默认情况下，cors不会携带cookie，除非这个值是true
     ```

     如果跨域请求想要操作cookie：

     ```
     服务的响应头中需要携带Access-Control-Allow-Credentials并且为true。
     浏览器发起ajax需要指定withCredentials 为true
     响应头中的Access-Control-Allow-Origin一定不能为*，必须是指定的域名
     ```

   - 特殊请求，会在正式通信之前，增加一次HTTP查询请求，称为"预检"（OPTIONS）请求。 浏览器先询问服务器，当前网页所在的域名是否在服务器的许可名单之中 。

6. 重绘和重排（回流）

   > - 回流=重排
   >
   > - 回流必将引起重绘，而重绘不一定会引起回流。
   >
   > -  当页面布局和几何属性改变时就需要回流
   >
   >    影响元素的外观，颜色，而不会影响布局的，发生重绘 

7. 客户端三种储存方式：

   (1) 存储大小

   - cookie数据大小不能超过4k。
   - sessionStorage和localStorage 虽然也有存储大小的限制，但比cookie大得多，可以达到5M或更大。

   (2) 有效时间

   - localStorage 存储持久数据，浏览器关闭后数据不丢失除非主动删除数据；
   - sessionStorage 数据在当前浏览器窗口关闭后自动删除。
   - cookie默认会话结束，可以设定时间

​	(3) 数据与服务器之间的交互方式

​		- 传递到服务器，服务器端也可以写cookie到客户端

​		- sessionStorage和localStorage不会自动把数据发给服务器，仅在本地保存。