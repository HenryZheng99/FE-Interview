# 项目深入复习

项目地址

官网：http://47.96.95.75:7003

教学平台：http://121.37.246.177/#/login  账号tring001，密码123456

3D：http://47.96.95.75:9998/  账号 littlea 密码123

## 官网

>1. 负责项目基础工程架构，实现PC端自适应、CSS模块化工程规范等
>2. 负责优化工作：加载优化、组件异步加载、打包优化等 
>3. 编写实用跳转滚动功能工具

#### 滚动工具

<img src="C:\Users\NHT\Desktop\前端复习\img\滚动工具.PNG" alt="滚动工具" style="zoom: 80%;" />

- 效仿JQ源码架构
- 整体最外层是用一个立即执行函数
- 将window传进去，减少作用域的查找
- 写了一个单例模式的方法在原型上，保证不管在哪份代码中使用，都使用同一个对象，节约内存。实现无new化创建对象（暴露工具名字在window上）。
- 功能方法，原理是`window.scrollTo`，写这个方法的时候要注意判断空值、判断类型

#### CSS模块化

- 背景：因为甲方经常改需求，样式很多地方都是可以共用的

- 将公共样式抽离

- 需要复用的样式又要调整参数，就可以用到sass的`@mixin`，类似于函数的功能，可以传参，需要的地方就`@include`

- 为了防止样式污染，用到module属性

  >scoped 属性会自动生成一个唯一的属性为组件内 CSS 指定作用域，但是，它并不能完全避免冲突，相同类名还是会冲突。
  >
  >module会直接改变类名。

   在模板中使用动态类绑定:class，并在类名前面加上'$style.' 

#### PC自适应（业界有什么解决方案？）

- `postcss-plugin-px2rem` 用来把px单位转换为rem单位

- 重新设定根font大小：

  <img src="C:\Users\NHT\Desktop\前端复习\img\fontRem.PNG" alt="fontRem" style="zoom:75%;" />

  如果设计稿的版心是1200px，屏幕宽度是1920（用`window.innerWidth`可以获得），则如果要实现100px=1rem，就是设计稿/屏幕宽，再用100乘以这个比例，就能获得新的fontsize值。然后在document对象上用style直接设置fontSize。最后重写window.onresize方法。
  
  <img src="C:\Users\NHT\Desktop\前端复习\img\pc自适应.PNG" alt="pc自适应" style="zoom:75%;" />

#### 加载优化

- 图片加载，懒加载效果不明显，还是因为有些图片实在是太大了，而且都是大张的图片。canvas：

  > drawImage将图片到画布上，实现压缩
>
  > toBlob方法，将图片转换为二进制的blob文件通过ajax上传到后端。blob将base64编码的src 以二进制的形式存进了 Blob对象
  >
  > window.URL.createObjectURL(blob)，或者用toDataUrl转为base64，形成一个前端预览的效果

思路：懒加载 --> 图片压缩（上传压缩和静态资源压缩） --> oss处理 --> 用户体验（loading动画）

   https://www.jianshu.com/p/d2f14489bbe9 全部都在这了

- OSS优化待补充

- 组件异步加载

  <img src="C:\Users\NHT\Desktop\前端复习\img\组件异步加载.PNG" alt="组件异步加载" style="zoom:75%;" />

  > 在vue-router中用require语法代替import会将component分别打包成不同的js，按需加载，访问此路由时才会加载这个js 
  
- 懒加载

  > 懒加载的原理就是只加载自定义区域（通常是可视区域，但也可以是即将进入可视区域）内需要加载的东西。对于图片来说，**先设置图片标签的 `src` 属性为一张占位图，将真实的图片资源放入一个自定义属性中，当进入自定义区域时，就将自定义属性替换为 `src` 属性**，这样图片就会去下载资源，实现了图片懒加载 

## AI教学平台

> 1. 技术栈为Vue+Typescript 
> 2. 参与产品规划，确定项目架构：划分系统模块、css预(后)处理等，规范合作开发：ESLint、Git、组件化、API管理和路由模块化等
> 3. 独立完成学生端教学界面及其功能、课程模块等核心工作。

#### Typescript

- Vue2.x本身对TS的支持不是很好，现有的API和类型系统是有缺陷的。而react本身就支持函数和类，比较适合搭配TS
- Vue2.x中如果要用ts，并且用class来写组件，就要用到vue-property-decorator

>1. TypeScript能从可维护性、健壮性等方面提高代码质量。一些参数类型，参数个数的错误检测，判空处理等。如果未处理，在复杂的线上环境中，程序就有可能会崩溃。而TS可以帮助我们避免这些问题，从而提高代码健壮性, 因为TS是强类型的语言。
>2. 对面向对象思想进行了增强，接口、泛型等。
>3. TS是未来主流框架的开发语言，如果要学习框架，就要能看得懂源码。。。（吹）
- 网上看到说ts在vue、react里面打包慢的问题，是因为目前wepack的ts-loader还不完善，速度太慢，可以换成用babel的ts插件就可以了

#### API

- 封装API类，管理前拦截，header加token，后拦截，响应数据处理，根据后端规定的自定义的状态码。错误处理，404、500、401等。
- 定义baseUrl（生产、开发环境）、timeout时间等。
- 按业务API分模块，定义API类，单例导出，在其中写请求方法

#### 路由模块化

路由表实现模块化，最初是为了实现更好的管理，项目的路由比较多，路由如若不区分模块化配置，所有路由挤在同一个文件将不好维护。可以分文件管理

> 使用 require.context() 方法来创建自己的（模块）上下文。
>
> 这个方法有 3 个参数：
>
> - 要搜索的文件夹目录
> - 是否还应该搜索它的子目录
> - 以及一个匹配文件的正则表达式。

<img src="C:\Users\NHT\Desktop\前端复习\img\路由模块化.PNG" alt="路由模块化" style="zoom:75%;" />

这就能代替每个文件都去require

## 3D打印

> 1. 使用Vue+three.js打造项目，实现3D模型展示、模型大小调整等功能。
> 2. 负责用户在线打印、购物车组件、用户登录鉴权等核心功能模块 
> 3. 项目不仅在挑战杯中取得佳绩，更创造了为中小学青少年提供创客教育等社会效益。

#### webGL

- 三个最基础的图形：点、线、三角形，其余都是在此基础上组合的

-  WebGL绘制过程 ：

  1、获取顶点坐标

  2、图元装配（即画出一个个三角形）

  3、光栅化（生成片元，即一个个像素点）

  ![webgl1](C:\Users\NHT\Desktop\前端复习\img\webgl1.jpg)

#### Three.js

能做的，three.js基本上都帮我们做了。

- 辅助我们导出了模型数据；
- **自动生成了各种矩阵（ 将三维世界坐标转换成屏幕坐标 ）；**
- 生成了顶点**着色器**；
- 辅助我们生成材质，配置灯光；
- 根据我们设置的材质生成了片元着色器。
- **而且将webGL基于光栅化的2D API，封装成了我们人类能看懂的 3D API**。